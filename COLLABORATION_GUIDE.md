# 👥 多帳號協作使用指南

恭喜！您的日本旅遊App現在支持**真正的多帳號協作**功能了！

## ✨ 新功能概覽

### 現在您可以：
- ✅ 每個家人用**自己的Google帳號**登入
- ✅ 邀請家人加入同一個旅程
- ✅ 所有成員**即時同步**編輯景點
- ✅ 查看誰添加了哪個景點
- ✅ 管理成員（添加/移除）

---

## 🚀 快速開始

### 步驟一：每個家人用自己的帳號登入

1. **媽媽**用 `mom@gmail.com` 登入 App
2. **爸爸**用 `dad@gmail.com` 登入 App
3. **孩子**用 `child@gmail.com` 登入 App

> 💡 **重要**：每個人至少要登入一次App，這樣才能被找到和邀請。

---

### 步驟二：創建者建立旅程

假設**媽媽**是創建者：

1. 打開App，進入「行程」頁面
2. 點擊「+ 新增行程」
3. 輸入：
   - 行程名稱：`東京家庭旅遊`
   - 目的地：`東京`
4. 點擊「創建」

✅ 旅程創建成功！但現在只有媽媽能看到。

---

### 步驟三：邀請家人加入

**媽媽**繼續操作：

1. 在「行程」頁面，看到「行程概覽」卡片
2. 點擊綠色的「👥 管理成員」按鈕
3. 在「邀請新成員」區域：
   - 輸入爸爸的email：`dad@gmail.com`
   - 點擊「邀請」
   - ✅ 成功！顯示「已邀請 爸爸 加入旅程！」

4. 繼續邀請孩子：
   - 輸入：`child@gmail.com`
   - 點擊「邀請」
   - ✅ 成功！

5. 點擊「完成」關閉

---

### 步驟四：家人查看共享旅程

**爸爸和孩子**的操作：

1. 打開App（或重新整理）
2. 進入「行程」頁面
3. 🎉 **自動看到**「東京家庭旅遊」！
4. 點擊旅程卡片，就能查看所有景點

---

### 步驟五：開始協作！

現在所有人都可以：

**添加景點：**
- 爸爸添加「淺草寺」
- 媽媽添加「晴空塔」
- 孩子添加「迪士尼樂園」
- ✅ 所有人**立即**看到彼此添加的景點！

**編輯景點：**
- 任何成員都可以編輯景點資訊
- 修改後即時同步到所有人

**查看地圖：**
- 切換到「地圖」頁面
- 所有景點都顯示在同一個地圖上

**規劃路線：**
- 點擊「規劃路線」
- 自動規劃最佳遊覽順序

---

## 📋 功能詳解

### 1. 成員管理介面

點擊「👥 管理成員」後，您會看到：

#### 邀請新成員
```
┌─────────────────────────────────────┐
│ 邀請新成員                          │
│                                     │
│ [輸入家人的 Gmail 地址] [邀請]     │
│ 💡 對方需要先用該 email 登入過      │
│    App 才能被邀請                   │
└─────────────────────────────────────┘
```

#### 成員列表
```
┌─────────────────────────────────────┐
│ 成員列表 (3)                        │
│                                     │
│ 👤 媽媽 (創建者)                    │
│    mom@gmail.com                    │
│                                     │
│ 👤 爸爸                   [移除]   │
│    dad@gmail.com                    │
│                                     │
│ 👤 孩子                   [移除]   │
│    child@gmail.com                  │
└─────────────────────────────────────┘
```

---

### 2. 權限說明

| 角色 | 創建旅程 | 編輯旅程資訊 | 邀請成員 | 移除成員 | 添加景點 | 編輯景點 | 刪除旅程 |
|------|---------|-------------|---------|---------|---------|---------|---------|
| **創建者** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **成員** | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ | ❌ |

**說明：**
- **創建者**：有完整權限
- **成員**：可以編輯內容，但不能管理成員或刪除旅程
- **非成員**：完全看不到這個旅程

---

### 3. 即時同步機制

**場景：**
1. 媽媽添加「淺草寺」
2. **不到1秒**，爸爸的手機自動顯示這個景點
3. 孩子的手機也同步更新

**原理：**
- 使用 Firebase Firestore 的即時監聽功能
- 任何資料變動都會自動推送到所有客戶端
- 不需要手動刷新

---

## ❓ 常見問題

### Q1: 為什麼找不到家人的email？

**A:** 確認以下幾點：
1. ✅ 對方已經用該email登入過App
2. ✅ Email拼寫正確（包括大小寫）
3. ✅ 網路連接正常

如果確認無誤還是找不到：
- 請對方登出後重新登入
- 等待1-2分鐘後再試

---

### Q2: 邀請成功後，對方看不到旅程？

**A:** 請對方：
1. 重新啟動App
2. 進入「行程」頁面
3. 向下拉刷新列表

如果還是看不到：
- 檢查對方是否用正確的帳號登入
- 檢查網路連接

---

### Q3: 可以邀請多少個成員？

**A:** 技術上沒有限制，但建議：
- **5-10人**：最佳體驗
- **超過20人**：可能影響App性能

對於家庭使用，5-10人完全足夠。

---

### Q4: 如何移除成員？

**A:** 只有**創建者**可以移除成員：

1. 點擊「👥 管理成員」
2. 在成員列表中找到要移除的成員
3. 點擊該成員旁邊的「移除」按鈕
4. 確認移除

⚠️ **注意**：
- 無法移除創建者
- 無法移除自己（請使用「退出旅程」功能）

---

### Q5: 如何退出旅程？

**A:** 目前還沒有「退出旅程」按鈕，需要：
- 請創建者移除您
- 或者忽略該旅程即可

> 📝 **未來功能**：我們會添加「退出旅程」按鈕。

---

### Q6: 成員添加的景點能被其他人刪除嗎？

**A:** 可以！所有成員都能：
- 編輯任何景點
- 刪除任何景點

這是為了方便協作，所以請彼此溝通好再操作。

---

### Q7: 誰能看到我添加的景點？

**A:** 只有**同一個旅程的成員**能看到。

例如：
- 旅程A：媽媽、爸爸、孩子
- 旅程B：媽媽、朋友

媽媽在旅程A添加的景點，只有爸爸和孩子能看到，朋友看不到。

---

## 💡 最佳實踐

### 1. 建立旅程時的建議

**創建者選擇：**
- 選擇最負責任的家人當創建者
- 通常是旅程的主要規劃者

**命名建議：**
- 清楚的名稱：`2025東京春季旅遊`
- 包含時間和地點

---

### 2. 邀請成員的時機

**最佳時機：**
1. 創建旅程後**立即**邀請所有成員
2. 這樣大家可以從一開始就參與規劃

**避免：**
- 已經添加很多景點後才邀請
- 這樣新成員會感覺「錯過了」

---

### 3. 協作溝通

**建議：**
- 📱 配合家庭群組聊天使用
- 💬 討論景點時說明添加原因
- 🗣️ 刪除景點前先溝通

**範例：**
```
[家庭群組]
媽媽：我剛添加了淺草寺，早上9點去！
爸爸：好！我也加了晴空塔，下午參觀
孩子：我想去迪士尼，加在第3天了
```

---

### 4. 景點標註技巧

**善用備註欄：**
```
景點：淺草寺
備註：
- 媽媽推薦
- 營業時間：6:00-17:00
- 必看：雷門、五重塔
- 預計停留：2小時
```

**善用類型：**
- 類型填寫：`寺廟（媽媽推薦）`
- 這樣能知道是誰推薦的

---

## 🎯 使用場景範例

### 場景一：出發前規劃

**時間軸：**
1. **1個月前**：媽媽創建旅程，邀請全家
2. **3週前**：大家開始添加想去的景點
3. **2週前**：討論並調整行程
4. **1週前**：確定每天的景點順序
5. **出發前**：在「地圖」頁面規劃路線

---

### 場景二：旅途中調整

**上午：**
- 原計劃去淺草寺
- 爸爸發現下雨，在App中改為室內景點
- ✅ 所有人立即看到變更

**下午：**
- 孩子發現附近有好玩的地方
- 立即添加到App
- ✅ 全家討論是否前往

---

### 場景三：回憶記錄

**旅行後：**
- 每個人添加照片（未來功能）
- 在備註中記錄感想
- 成為美好的旅行記憶

---

## 🔒 隱私與安全

### 資料保護

1. **只有成員能看到**：非成員完全看不到旅程
2. **安全登入**：使用Google OAuth 2.0
3. **資料加密**：Firebase自動加密傳輸
4. **權限控制**：Firestore安全規則保護

### 建議

- ✅ 不要分享帳號密碼
- ✅ 只邀請信任的家人
- ✅ 定期檢查成員列表
- ❌ 不要邀請陌生人

---

## 🎉 開始使用吧！

現在您已經了解所有功能，開始邀請家人一起規劃您的東京之旅吧！

**快速回顧：**
1. ✅ 每個人用自己的Google帳號登入
2. ✅ 創建者建立旅程
3. ✅ 點擊「👥 管理成員」邀請家人
4. ✅ 開始添加景點並即時同步
5. ✅ 在「地圖」頁面規劃路線

**祝您旅途愉快！🗼🎌**

---

## 📞 需要幫助？

如果遇到問題：
1. 查看 `README.md` 的故障排除章節
2. 查看 `SETUP_GUIDE.md` 的常見問題
3. 檢查網路連接和Firebase配置

---

*最後更新：2025-12-10*
